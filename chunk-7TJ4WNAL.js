import{a as W}from"./chunk-6H62NEYR.js";import{a as H}from"./chunk-YJFGDHNA.js";import"./chunk-S3CE4ME5.js";import{a as Q,b as V,c as Z,d as ee}from"./chunk-24LNRKFB.js";import{b as X}from"./chunk-CRKU5KSD.js";import{d as q}from"./chunk-DVHLPAPL.js";import{a as T}from"./chunk-XOOE5SPG.js";import"./chunk-KPIESNAD.js";import{C as K,Ha as J,ea as G,v as j,x as Y,y as z}from"./chunk-VUGEM32W.js";import{i as R,j as L}from"./chunk-KPPRGEDN.js";import{$b as _,Cb as U,Db as D,Eb as P,Fb as c,Gb as m,Hb as h,Wa as p,Wb as E,Xb as F,Zb as u,_b as S,a as O,b as N,cc as k,gc as w,hb as C,hc as r,ic as s,ka as g,kb as f,kc as M,pc as v,tc as $,x as B}from"./chunk-4JEDTTQH.js";function ie(i,e){let o=parseInt(i,10),t=(Math.sign(o)||1)*Math.abs(e)/1e9;return o+t}var te=(()=>{let e=class e{transform(n){return V(n)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=f({name:"tuiAutoColor",type:e,pure:!0});let i=e;return i})();var ne=(()=>{let e=class e{transform(n){return n.toUpperCase().split(" ").map(([t])=>t).join("").slice(0,2)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=f({name:"tuiInitials",type:e,pure:!0});let i=e;return i})();var pe={currency:null,currencyAlign:"left",sign:"negative-only"},se=K(pe);function ce(i,e){return e==="never"||!i||e==="negative-only"&&i>0?"":e==="force-negative"||i<0&&e!=="force-positive"?Y:z}var ae=2,oe=(()=>{let e=class e{constructor(){this.options=g(se),this.format=g(J)}transform(n,t=this.options.currency,y=this.options.currencyAlign){return this.format.pipe(B(d=>{let a=Z(t),l=Q(Math.abs(n),N(O({},d),{precision:Number.isNaN(d.precision)?ae:d.precision})),x=l==="0"?"":ce(n,this.options.sign),I=a&&(a?.length>1||y==="right")?j:"";return y==="right"?`${x}${l}${I}${a}`:`${x}${a}${I}${l}`}))}};e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=f({name:"tuiAmount",type:e,pure:!0});let i=e;return i})();var ue=i=>[i],A=class i{position=$.required();combinePrice=ie;quantityUnits=v(()=>Number(this.position().quantity.units));static \u0275fac=function(o){return new(o||i)};static \u0275cmp=C({type:i,selectors:[["app-position-item"]],inputs:{position:[1,"position"]},decls:28,vars:45,consts:[["tuiAppearance","floating","tuiCardMedium","",1,"card",3,"routerLink"],[1,"avatar",3,"src"],[1,"content"],["tuiTitle","",1,"card__name"],[1,"current-price"],[1,"price"],[1,"expected-yield"]],template:function(o,n){if(o&1&&(k(0),r(1,"uppercase"),r(2,"tuiCurrency"),c(3,"div",0),h(4,"tui-avatar",1),r(5,"tuiAutoColor"),r(6,"tuiInitials"),c(7,"div",2)(8,"h2",3),u(9),m(),c(10,"div")(11,"span"),u(12),r(13,"tuiAmount"),r(14,"async"),m(),c(15,"span",4),u(16),r(17,"tuiAmount"),r(18,"async"),m()()(),c(19,"div",5)(20,"div"),u(21),r(22,"tuiAmount"),r(23,"async"),m(),c(24,"div",6),u(25),r(26,"tuiAmount"),r(27,"async"),m()()()),o&2){let t=n.position(),y=n.combinePrice(t.currentPrice.units,t.currentPrice.nano),d=n.combinePrice(t.expectedYield.units,t.expectedYield.nano),a=s(2,15,s(1,13,t.currentPrice.currency)),l=n.quantityUnits(),x=l*y;p(3),P("routerLink",w(43,ue,t.ticker)),p(),E("background",s(5,17,t.ticker)),P("src",s(6,19,t.ticker)),p(5),_(" ",t.ticker," "),p(3),_("",s(14,23,s(13,21,l))," \u0448\u0442."),p(4),S(s(18,29,M(17,25,y,a,"right"))),p(5),S(s(23,35,M(22,31,x,a,"right"))),p(3),F("expected-yield_negative",d<0)("expected-yield_positive",d>0),p(),_("",s(27,41,M(26,37,d,a,"right"))," ")}},dependencies:[q,X,G,T,W,te,ne,ee,L,oe,R],styles:[".card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;block-size:auto;gap:10px;cursor:pointer}.avatar[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-grow:1;gap:6px}.price[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:flex-end;gap:6px}.current-price[_ngcontent-%COMP%]{margin-left:8px}.expected-yield[_ngcontent-%COMP%]{top:-2px;position:relative;color:#888}.expected-yield_negative[_ngcontent-%COMP%]{color:#dc143c}.expected-yield_positive[_ngcontent-%COMP%]{color:#228b22}"]})};var de=(i,e)=>e.ticker;function le(i,e){if(i&1&&h(0,"app-position-item",1),i&2){let o=e.$implicit;P("position",o)}}var re=class i{operationsService=g(H);portfolio=this.operationsService.selectPortfolio;positions=v(()=>this.portfolio()?.positions);positionShares=v(()=>this.positions()?.filter(e=>e.instrumentType==="share"));static \u0275fac=function(o){return new(o||i)};static \u0275cmp=C({type:i,selectors:[["app-positions"]],decls:4,vars:0,consts:[["tuiTitle","m",1,"title"],[3,"position"]],template:function(o,n){o&1&&(c(0,"h2",0),u(1,"\u041E\u0442\u043A\u0440\u044B\u0442\u044B\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438"),m(),U(2,le,1,1,"app-position-item",1,de)),o&2&&(p(2),D(n.positionShares()))},dependencies:[A,T],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:10px}.title[_ngcontent-%COMP%]{margin-bottom:10px}"]})};export{re as PositionsComponent};
