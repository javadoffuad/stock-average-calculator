import{a as K,b as V}from"./chunk-ZD4KTBA3.js";import{a as z,b as R}from"./chunk-34II3ZXP.js";import{b as J,c as W,d as X}from"./chunk-IALOEXY4.js";import{b as Q}from"./chunk-7TG3RTET.js";import"./chunk-S3CE4ME5.js";import{d as $}from"./chunk-54IAJEYX.js";import{a as C}from"./chunk-KVMZXWI6.js";import"./chunk-2T6ESY2B.js";import{ea as G}from"./chunk-6LE2PYTX.js";import{i as Y,j as H}from"./chunk-ZN7IDPJX.js";import{$b as v,Cb as w,Db as D,Eb as P,Fb as a,Gb as m,Hb as y,Ob as F,Wa as p,Wb as L,Xb as U,Zb as u,_b as T,bc as d,cc as E,dc as N,fc as q,gc as o,hb as g,hc as s,ic as j,jc as x,ka as S,kb as l,oc as f,sc as B}from"./chunk-HWLOXOEQ.js";function Z(t,e){let n=parseInt(t,10),r=(Math.sign(n)||1)*Math.abs(e)/1e9;return n+r}var ee=(()=>{let e=class e{transform(i){return J(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=l({name:"tuiAutoColor",type:e,pure:!0});let t=e;return t})();var te=(()=>{let e=class e{transform(i){return i.toUpperCase().split(" ").map(([r])=>r).join("").slice(0,2)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=l({name:"tuiInitials",type:e,pure:!0});let t=e;return t})();var se=t=>[t],_=class t{position=B.required();instrument=B();combinePrice=Z;quantityUnits=f(()=>Number(this.position().quantity.units));logoUrl=f(()=>{let e=this.instrument()?.brand;return e?V(e):null});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-position-item"]],inputs:{position:[1,"position"],instrument:[1,"instrument"]},decls:29,vars:45,consts:[["tuiAppearance","floating","tuiCardMedium","",1,"card",3,"routerLink"],[1,"avatar",3,"src"],[1,"content"],["tuiTitle","",1,"card__name"],[1,"current-price"],[1,"price"],[1,"expected-yield"]],template:function(n,i){if(n&1&&(d(0),o(1,"uppercase"),o(2,"tuiCurrency"),d(3),o(4,"tuiInitials"),a(5,"div",0),y(6,"tui-avatar",1),o(7,"tuiAutoColor"),a(8,"div",2)(9,"h2",3),u(10),m(),a(11,"div")(12,"span"),u(13),o(14,"tuiAmount"),o(15,"async"),m(),a(16,"span",4),u(17),o(18,"tuiAmount"),o(19,"async"),m()()(),a(20,"div",5)(21,"div"),u(22),o(23,"tuiAmount"),o(24,"async"),m(),a(25,"div",6),u(26),o(27,"tuiAmount"),o(28,"async"),m()()()),n&2){let r,c=i.position(),A=i.combinePrice(c.currentPrice.units,c.currentPrice.nano),b=i.combinePrice(c.expectedYield.units,c.expectedYield.nano),M=s(2,15,s(1,13,c.currentPrice.currency)),k=i.quantityUnits(),ne=k*A,O=i.logoUrl(),oe=O||s(4,17,c.ticker),re=((r=i.instrument())==null?null:r.name)??c.ticker;p(5),P("routerLink",q(43,se,c.ticker)),p(),L("background",s(7,19,c.ticker)),P("src",oe),p(4),v(" ",re," "),p(3),v("",s(15,23,s(14,21,k))," \u0448\u0442."),p(4),T(s(19,29,x(18,25,A,M,"right"))),p(5),T(s(24,35,x(23,31,ne,M,"right"))),p(3),U("expected-yield_negative",b<0)("expected-yield_positive",b>0),p(),v("",s(28,41,x(27,37,b,M,"right"))," ")}},dependencies:[$,Q,G,C,K,ee,te,X,H,W,Y],styles:[".card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;block-size:auto;gap:10px;cursor:pointer}.avatar[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-grow:1;gap:6px}.price[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:flex-end;gap:6px}.current-price[_ngcontent-%COMP%]{margin-left:8px}.expected-yield[_ngcontent-%COMP%]{top:-2px;position:relative;color:#888}.expected-yield_negative[_ngcontent-%COMP%]{color:#dc143c}.expected-yield_positive[_ngcontent-%COMP%]{color:#228b22}"]})};var h=class t{transform(e,n){return n.find(i=>i.uid===e.instrumentUid)}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=l({name:"findInstrument",type:t,pure:!0})};var ce=(t,e)=>e.ticker;function ae(t,e){if(t&1&&(d(0),o(1,"findInstrument"),y(2,"app-position-item",1)),t&2){let n=e.$implicit;F();let i=N(0),r=j(1,2,n,i);p(2),P("position",n)("instrument",r)}}var ie=class t{operationsService=S(z);instrumentsService=S(R);positions=f(()=>this.operationsService.selectPortfolio()?.positions);positionShares=f(()=>this.positions()?.filter(e=>e.instrumentType==="share")||[]);instruments=this.instrumentsService.selectInstruments;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=g({type:t,selectors:[["app-positions"]],decls:5,vars:1,consts:[["tuiTitle","m",1,"title"],[3,"position","instrument"]],template:function(n,i){n&1&&(d(0),a(1,"h2",0),u(2,"\u041E\u0442\u043A\u0440\u044B\u0442\u044B\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438"),m(),w(3,ae,3,5,"app-position-item",1,ce)),n&2&&(E(i.instruments()),p(3),D(i.positionShares()))},dependencies:[_,h,C],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:10px}.title[_ngcontent-%COMP%]{margin-bottom:10px}"]})};export{ie as PositionsComponent};
