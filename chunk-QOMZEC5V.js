import{a as k,e as I,f as T,g as m,i as B,j as O,k as R}from"./chunk-T5CIW55O.js";import"./chunk-3LIWCLF5.js";import{$b as F,Cb as s,Db as u,Eb as t,Fb as d,Jb as b,Lb as S,Mb as _,Ua as i,Xb as l,Yb as y,Zb as D,_b as E,ac as A,bc as M,fb as x,oa as h,pa as g,wa as v,yb as P,zb as w}from"./chunk-WTOALF4U.js";function j(c,a){if(c&1&&(u(0,"div",10)(1,"p"),l(2),t(),u(3,"p"),l(4),t()()),c&2){_();let e=M(0);i(2),E("\u041D\u0443\u0436\u043D\u043E \u0434\u043E\u043A\u0443\u043F\u0438\u0442\u044C ",e.sharesToBuy," \u0430\u043A\u0446\u0438\u0439, \u043D\u0430 \u0441\u0443\u043C\u043C\u0443: ",e.newTotalCost.toFixed(2)," \u0440\u0443\u0431."),i(2),D("\u041D\u043E\u0432\u0430\u044F \u0441\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430: ",e.newAveragePrice.toFixed(2)," \u0440\u0443\u0431.")}}var V=class c{title="\u0420\u0430\u0441\u0441\u0447\u0435\u0442 \u0441\u0440\u0435\u0434\u043D\u0435\u0439 \u0446\u0435\u043D\u044B \u0430\u043A\u0446\u0438\u0439";form=new T({currentShares:new m(null),averagePrice:new m(null),targetPrice:new m(null),currentMarketPrice:new m(null)});result=v(null);calculateAdditionalShares(a){let{currentShares:e,averagePrice:n,targetPrice:o,currentMarketPrice:r}=a,N=e*(n-o),f=o-r;if(f<=0)throw new Error(`\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0441\u0442\u0438\u0447\u044C \u0446\u0435\u043B\u0435\u0432\u043E\u0439 \u0446\u0435\u043D\u044B ${o} \u0440\u0443\u0431., \u0442\u0430\u043A \u043A\u0430\u043A \u0440\u044B\u043D\u043E\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (${r} \u0440\u0443\u0431.) \u043D\u0435 \u043D\u0438\u0436\u0435 \u0446\u0435\u043B\u0435\u0432\u043E\u0439.`);let p=Math.ceil(N/f),L=e*n+p*r,$=e+p,C=L/$;return{sharesToBuy:p,newAveragePrice:C,newTotalCost:p*C}}showResult(){let a=this.form.controls.currentShares.value,e=this.form.controls.averagePrice.value,n=this.form.controls.targetPrice.value,o=this.form.controls.currentMarketPrice.value;if(!(a&&e&&n&&o))return;let r=this.calculateAdditionalShares({currentShares:a,averagePrice:e,targetPrice:n,currentMarketPrice:o});this.result.set(r)}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=x({type:c,selectors:[["app-calculator"]],decls:24,vars:7,consts:[[1,"content"],[1,"own-stocks"],[1,"fields"],[1,"field"],["type","number","placeholder","\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0430\u043A\u0446\u0438\u0439",3,"formControl"],["type","number","placeholder","\u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430, \u0440\u0443\u0431.",3,"formControl"],[1,"buy-stocks"],["type","number","placeholder","\u0416\u0435\u043B\u0430\u0435\u043C\u0430\u044F \u0441\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430, \u0440\u0443\u0431.",3,"formControl"],["type","number","placeholder","\u0420\u044B\u043D\u043E\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430, \u0440\u0443\u0431.",3,"formControl"],[1,"calculate",3,"click"],[1,"result"]],template:function(e,n){if(e&1){let o=b();F(0),u(1,"div",0)(2,"h2"),l(3),t(),u(4,"div",1)(5,"p"),l(6,"\u0410\u043A\u0446\u0438\u0438 \u0432 \u043D\u0430\u043B\u0438\u0447\u0438\u0438"),t(),u(7,"div",2)(8,"div",3),d(9,"input",4),t(),u(10,"div",3),d(11,"input",5),t()()(),u(12,"div",6)(13,"p"),l(14,"\u041A \u043F\u043E\u043A\u0443\u043F\u043A\u0435"),t(),u(15,"div",2)(16,"div",3),d(17,"input",7),t(),u(18,"div",3),d(19,"input",8),t()()(),u(20,"div",3)(21,"button",9),S("click",function(){return h(o),g(n.showResult())}),l(22,"\u0420\u0430\u0441\u0447\u0438\u0442\u0430\u0442\u044C"),t()(),P(23,j,5,3,"div",10),t()}if(e&2){let o=A(n.result()),r=n.form.controls;i(3),y(n.title),i(6),s("formControl",r.currentShares),i(2),s("formControl",r.averagePrice),i(6),s("formControl",r.targetPrice),i(2),s("formControl",r.currentMarketPrice),i(4),w(o?23:-1)}},dependencies:[R,k,B,I,O],styles:[".content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;width:100%;max-width:460px;margin-bottom:3rem}.own-stocks[_ngcontent-%COMP%]{padding-bottom:20px;border-bottom:1px solid #919191}.fields[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;gap:20px}.content[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]{flex-grow:1;margin-top:20px;display:flex}input[_ngcontent-%COMP%]{width:100%;height:34px;padding:4px 10px}.calculate[_ngcontent-%COMP%]{width:100%;height:34px;padding:4px 10px;background-color:#6495ed;border:0;color:#fff;cursor:pointer}"]})};export{V as CalculatorComponent};
