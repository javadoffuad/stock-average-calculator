import{a as Fe,b as Mt,c as Ve,d as ft}from"./chunk-BXPJKCCR.js";import{a as ce}from"./chunk-UHMEBZ6S.js";import{a as Re,c as We,d as ze}from"./chunk-IALOEXY4.js";import{b as Ge}from"./chunk-7TG3RTET.js";import"./chunk-S3CE4ME5.js";import{a as $e,b as Be,d as ht,e as He,f as je,g as Ue}from"./chunk-WSONS5JK.js";import{L as ke,M as Oe,N as Le,n as mt,x as Ne,y as Me}from"./chunk-GA7O7EXA.js";import"./chunk-26YOBPZ7.js";import{a as pt}from"./chunk-H7YW2JBU.js";import{a as Ie}from"./chunk-KVMZXWI6.js";import"./chunk-2T6ESY2B.js";import{$ as Nt,A as lt,Ca as dt,Da as Ce,Ea as ye,F as be,Ga as we,Ha as Pe,N as Ee,a as at,da as xe,e as ae,ea as Se,f as le,g as K,ga as _e,i as de,j as pe,ja as Te,k as me,l as fe,n as he,ra as De,ta as Ae,w as ge,x as It,z as ve}from"./chunk-6LE2PYTX.js";import{h as oe,i as ue}from"./chunk-ZN7IDPJX.js";import{$b as ot,Ab as yt,Bb as wt,E as zt,Eb as P,Fa as Yt,Fb as v,Ga as Xt,Gb as g,Hb as k,Ia as Kt,Ib as Jt,Jb as Qt,Lb as rt,Mb as te,Nb as I,Ob as y,Wa as x,Wb as ee,Xb as ne,Zb as b,a as z,ac as ie,b as Z,bc as X,c as At,cc as se,d as Gt,dc as Pt,ec as ut,gc as T,hb as R,hc as N,jb as j,jc as ct,ka as h,lb as qt,mb as Y,nb as Ct,oc as O,pc as re,qa as F,qb as it,ra as V,ua as Zt,x as Wt,ya as D,zb as st}from"./chunk-HWLOXOEQ.js";var Ze=(()=>{let e=class e{constructor(){this.resolver=ye(),this.backgroundSrc=D(null),this.iconSrc=D(this.resolve(h(dt,{self:!0,optional:!0})||h(Ce,{self:!0,optional:!0})))}set icon(t){this.iconSrc.set(this.resolve(t))}set background(t){this.backgroundSrc.set(this.resolve(t))}resolve(t){return t?`url(${this.resolver(t)})`:null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=R({type:e,selectors:[["tui-icon"]],hostVars:4,hostBindings:function(n,r){n&2&&ee("--t-icon",r.iconSrc()||"url()")("--t-icon-bg",r.backgroundSrc())},inputs:{icon:"icon",background:"background"},decls:0,vars:0,template:function(n,r){},styles:[`tui-icon{position:relative;display:inline-block;inline-size:1em;block-size:1em;font-size:1.5rem;flex-shrink:0;border:0 solid transparent;vertical-align:middle;box-sizing:border-box;-webkit-mask:var(--t-icon-bg) no-repeat center / contain;mask:var(--t-icon-bg) no-repeat center / contain}@media (hover: hover) and (pointer: fine){tui-icon[data-appearance=icon]:hover{color:var(--tui-text-secondary)}}tui-icon:after,tui-icon[tuiIcons]:after{position:absolute;top:0;left:0;inline-size:100%;block-size:100%;content:"";display:block;-webkit-mask:var(--t-icon) no-repeat center / contain;mask:var(--t-icon) no-repeat center / contain;background:currentColor}
`],encapsulation:2,changeDetection:0});let i=e;return i})();var[Ye,Wi]=pt({icon:"",appearance:"icon"}),xn=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=R({type:e,selectors:[["ng-component"]],hostAttrs:[1,"tui-tooltip"],decls:0,vars:0,template:function(n,r){},styles:[`[tuiTooltip]{border-width:.125rem;border-radius:100%;cursor:pointer;pointer-events:auto;background-clip:content-box!important}[tuiTooltip] [tuiBlock],[tuiTooltip] [tuiCell][data-size=s],[tuiLabel][data-orientation=horizontal] [tuiTooltip],[tuiTooltip][data-size=s]{font-size:1.25rem}[tuiTitle] [tuiTooltip]{font-size:1rem;border:none}[tuiTooltip]:after{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);inline-size:1rem;block-size:1rem}@media (hover: hover) and (pointer: fine){tui-textfield:hover [tuiTooltip][data-appearance=icon]:after,tui-textarea:hover [tuiTooltip][data-appearance=icon]:after,tui-primitive-textfield:hover [tuiTooltip][data-appearance=icon]:after,tui-input-tag:hover [tuiTooltip][data-appearance=icon]:after{color:var(--tui-text-secondary)}}
`],encapsulation:2,changeDetection:0});let i=e;return i})(),Xe=(()=>{let e=class e{constructor(){this.textfield=h(ht,{optional:!0}),this.isMobile=h(Ne),this.describe=h(ft),this.driver=h(Mt),this.nothing=Ee(xn),this.state=_e(lt(h(Mt).pipe(Wt(t=>t?"hover":null),De()),{initialValue:null})),this.size="m"}ngDoCheck(){this.textfield?.id&&(this.describe.tuiHintDescribe=this.textfield.id)}onClick(t){this.isMobile?(t.preventDefault(),t.stopPropagation()):this.driver.toggle()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=j({type:e,selectors:[["tui-icon","tuiTooltip",""]],hostAttrs:["tuiTooltip",""],hostVars:1,hostBindings:function(n,r){n&1&&I("click.prevent",function(){return 0})("mousedown",function(u){return r.onClick(u)}),n&2&&st("data-size",r.size)},inputs:{size:"size"},features:[ut([xe(Ye),{provide:dt,useFactory:()=>h(Ye).icon||h(Fe).icon}]),Y([Te,{directive:ft,inputs:["tuiHintDescribe","tuiTooltipDescribe"]},{directive:Ve,inputs:["tuiHint","tuiTooltip","tuiHintAppearance","tuiHintAppearance","tuiHintContext","tuiHintContext"]}])]});let i=e;return i})();function Ke(i){let{anchorOffset:e=0,focusOffset:s=0}=i.ownerDocument.getSelection()||{},t=Math.min(e,s),n=Math.max(e,s);return[t,n]}function Sn(i,[e,s]){var t,n,r,o;let u=i.ownerDocument,c=u.createRange();c.setStart(i.firstChild||i,Math.min(e,(n=(t=i.textContent)===null||t===void 0?void 0:t.length)!==null&&n!==void 0?n:0)),c.setEnd(i.lastChild||i,Math.min(s,(o=(r=i.textContent)===null||r===void 0?void 0:r.length)!==null&&o!==void 0?o:0));let a=u.getSelection();a&&(a.removeAllRanges(),a.addRange(c))}var kt=class{constructor(e){this.element=e,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(e){this.element.innerHTML=e.replace(/\n$/,`

`)}get selectionStart(){return Ke(this.element)[0]}get selectionEnd(){return Ke(this.element)[1]}setSelectionRange(e,s){Sn(this.element,[e??0,s??0])}select(){this.setSelectionRange(0,this.value.length)}};function _n(i){let e=new kt(i);return new Proxy(i,{get(s,t){if(t in e)return e[t];let n=s[t];return typeof n=="function"?n.bind(s):n},set(s,t,n,r){return Reflect.set(t in e?e:s,t,n,r)}})}var tn=i=>i.isContentEditable?_n(i):i.querySelector("input,textarea")||i,tt={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"},Ot=class{constructor(){this.now=null,this.past=[],this.future=[]}undo(){let e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){let e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now){this.now=e;return}let s=this.now.value!==e.value,t=this.now.selection.some((n,r)=>n!==e.selection[r]);!s&&!t||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}};function Tn(i,...e){return e.every(({value:s})=>s===i.value)}function Lt(i,...e){return e.every(({value:s,selection:t})=>s===i.value&&t[0]===i.selection[0]&&t[1]===i.selection[1])}function Dn({value:i,selection:e},s,t){let[n,r]=e,o=typeof t=="function"?t({value:i,selection:e}):t;return{value:i,selection:o==="replace"?[n,Math.max(n+s.length,r)]:[n,r]}}function St(i){return typeof i=="string"}function qe(i,e,s,t){let n="";for(let r=e.length;r<i.length;r++){let o=i[r]||"",u=t?.value[r]===o;if(!St(o)||o===s&&!u)return n;n+=o}return n}function en(i,e){return Array.isArray(e)?i.length===e.length&&Array.from(i).every((s,t)=>{let n=e[t]||"";return St(n)?s===n:s.match(n)}):e.test(i)}function An(i,e,s){let t=null,n=null,r=Array.from(i.value).reduce((u,c,a)=>{let l=qe(e,u,c,s),d=u+l,p=e[d.length]||"";return t===null&&a>=i.selection[0]&&(t=d.length),n===null&&a>=i.selection[1]&&(n=d.length),St(p)?d+p:c.match(p)?d+c:d},""),o=qe(e,r,"",s);return{value:en(r+o,e)?r+o:r,selection:[t??r.length,n??r.length]}}function Cn({value:i,selection:e},s){let[t,n]=e,r=t,o=n,u=Array.from(i).reduce((c,a,l)=>{let d=c+a;return t===l&&(r=c.length),n===l&&(o=c.length),d.match(s)?d:c},"");return{value:u,selection:[Math.min(r,u.length),Math.min(o,u.length)]}}function vt(i,e,s=null){if(en(i.value,e))return i;let{value:t,selection:n}=Array.isArray(e)?An(i,e,s):Cn(i,e);return{selection:n,value:Array.isArray(e)?t.slice(0,e.length):t}}function Je(i,e){if(!Array.isArray(e))return i;let[s,t]=i.selection,n=[],r=Array.from(i.value).reduce((o,u,c)=>{let a=e[c]||"";return c===s&&n.push(o.length),c===t&&n.push(o.length),St(a)&&a===u?o:o+u},"");return n.length<2&&n.push(...new Array(2-n.length).fill(r.length)),{value:r,selection:[n[0],n[1]]}}var Q=class{constructor(e,s){this.initialElementState=e,this.maskOptions=s,this.value="",this.selection=[0,0];let{value:t,selection:n}=vt(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=t,this.selection=n}addCharacters([e,s],t){let{value:n,maskOptions:r}=this,o=this.getMaskExpression({value:n.slice(0,e)+t+n.slice(s),selection:[e+t.length,e+t.length]}),u={value:n,selection:[e,s]},c=Je(u,o),[a,l]=Dn(c,t,r.overwriteMode).selection,d=c.value.slice(0,a)+t,p=d.length,f=vt({value:d+c.value.slice(l),selection:[p,p]},o,u);if(n.slice(0,e)===vt({value:d,selection:[p,p]},o,u).value||Lt(this,f))throw new Error("Invalid mask value");this.value=f.value,this.selection=f.selection}deleteCharacters([e,s]){if(e===s||!s)return;let{value:t}=this,n=this.getMaskExpression({value:t.slice(0,e)+t.slice(s),selection:[e,e]}),r={value:t,selection:[e,s]},o=Je(r,n),[u,c]=o.selection,a=o.value.slice(0,u)+o.value.slice(c),l=vt({value:a,selection:[u,u]},n,r);this.value=l.value,this.selection=l.selection}getMaskExpression(e){let{mask:s}=this.maskOptions;return typeof s=="function"?s(e):s}};var bt=class{constructor(e){this.element=e,this.listeners=[]}listen(e,s,t){let n=s;this.element.addEventListener(e,n,t),this.listeners.push(()=>this.element.removeEventListener(e,n,t))}destroy(){this.listeners.forEach(e=>e())}},A={CTRL:1,ALT:2,SHIFT:4,META:8},q={Y:89,Z:90};function J(i,e,s){return i.ctrlKey===!!(e&A.CTRL)&&i.altKey===!!(e&A.ALT)&&i.shiftKey===!!(e&A.SHIFT)&&i.metaKey===!!(e&A.META)&&i.keyCode===s}function yn(i){return J(i,A.CTRL,q.Y)||J(i,A.CTRL|A.SHIFT,q.Z)||J(i,A.META|A.SHIFT,q.Z)}function wn(i){return J(i,A.CTRL,q.Z)||J(i,A.META,q.Z)}function et(i,e){var s;let t=i.value;if(typeof e=="string")i.value=e;else{let[n,r]=e.selection;i.value=e.value,i.matches(":focus")&&((s=i.setSelectionRange)===null||s===void 0||s.call(i,n,r))}i.value!==t&&i.dispatchEvent(new Event("input",{bubbles:!0}))}function Pn({value:i,selection:e},s){let[t,n]=e;if(t!==n)return[t,n];let r=s?i.slice(t).indexOf(`
`)+1||i.length:i.slice(0,n).lastIndexOf(`
`)+1;return[s?t:r,s?r:n]}function In({value:i,selection:e},s){let[t,n]=e;return t!==n?[t,n]:(s?[t,n+1]:[t-1,n]).map(o=>Math.min(Math.max(o,0),i.length))}var Nn=/\s+$/g,Mn=/^\s+/g,Qe=/\s/;function Rn({value:i,selection:e},s){let[t,n]=e;if(t!==n)return[t,n];if(s){let c=i.slice(t),[a]=c.match(Mn)||[""],l=c.trimStart().search(Qe);return[t,l!==-1?t+a.length+l:i.length]}let r=i.slice(0,n),[o]=r.match(Nn)||[""],u=r.trimEnd().split("").reverse().findIndex(c=>Qe.exec(c));return[u!==-1?n-o.length-u:0,n]}function Et(i=[]){return(e,...s)=>i.reduce((t,n)=>Object.assign(Object.assign({},t),n(t,...s)),e)}function $(i,e){let s=Object.assign(Object.assign({},tt),e),t=Et(s.preprocessors),n=Et(s.postprocessors),r=typeof i=="string"?{value:i,selection:[0,0]}:i,{elementState:o}=t({elementState:r,data:""},"validation"),u=new Q(o,s),{value:c,selection:a}=n(u,r);return typeof i=="string"?c:{value:c,selection:a}}var Rt=" ";function kn(){let i="",e=0,s=null,t=!1;return n=>{let r=new bt(n);return r.listen("beforeinput",o=>{var u,c;let{value:a,selectionStart:l,selectionEnd:d}=n,p=s?.inputType==="insertText"&&s?.data===Rt&&!a.slice(0,Number(d)).endsWith(Rt);o.inputType==="insertText"&&o.data===`.${Rt}`&&(s?.inputType==="deleteContentBackward"&&t?(n.value=i,(u=n.setSelectionRange)===null||u===void 0||u.call(n,e,e)):p&&((c=n.setSelectionRange)===null||c===void 0||c.call(n,l,l))),t=p,s=o,i=a,e=Number((p?e:d)===a.length?d:l)}),()=>r.destroy()}}function nn(i){return(e,s)=>{var t,n;let r=(t=e.selectionStart)!==null&&t!==void 0?t:0,o=(n=e.selectionEnd)!==null&&n!==void 0?n:0;et(e,{value:$(e.value,i||s),selection:[r,o]})}}var On=[kn()],xt=class extends Ot{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new bt(this.element),this.options=Object.assign(Object.assign({},tt),this.maskitoOptions),this.upcomingElementState=null,this.preprocessor=Et(this.options.preprocessors),this.postprocessor=Et(this.options.postprocessors),this.teardowns=this.options.plugins.concat(On).map(t=>t(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>{if(yn(t))return t.preventDefault(),this.redo();if(wn(t))return t.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",t=>{var n,r,o;let u=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:u,selection:In(this.elementState,u)});case"deleteHardLineBackward":case"deleteHardLineForward":case"deleteSoftLineBackward":case"deleteSoftLineForward":return this.handleDelete({event:t,isForward:u,selection:Pn(this.elementState,u),force:!0});case"deleteWordBackward":case"deleteWordForward":return this.handleDelete({event:t,isForward:u,selection:Rn(this.elementState,u),force:!0});case"historyRedo":return t.preventDefault(),this.redo();case"historyUndo":return t.preventDefault(),this.undo();case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(t);case"insertReplacementText":return;case"insertFromDrop":case"insertFromPaste":case"insertText":default:return this.handleInsert(t,(o=(n=t.data)!==null&&n!==void 0?n:(r=t.dataTransfer)===null||r===void 0?void 0:r.getData("text/plain"))!==null&&o!==void 0?o:"")}}),this.eventListener.listen("input",()=>{this.upcomingElementState&&(this.updateElementState(this.upcomingElementState),this.upcomingElementState=null)},{capture:!0}),this.eventListener.listen("input",({inputType:t})=>{t!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>e?.())}updateElementState({value:e,selection:s},t){let n=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),t&&n!==e&&this.dispatchInputEvent(t)}get elementState(){let{value:e,selectionStart:s,selectionEnd:t}=this.element;return{value:e,selection:[s??0,t??0]}}get maxLength(){let{maxLength:e}=this.element;return e===-1?1/0:e}updateSelectionRange([e,s]){var t;let{element:n}=this;n.matches(":focus")&&(n.selectionStart!==e||n.selectionEnd!==s)&&((t=n.setSelectionRange)===null||t===void 0||t.call(n,e,s))}updateValue(e){(this.element.value!==e||this.element.isContentEditable)&&(this.element.value=e)}ensureValueFitsMask(){this.updateElementState($(this.elementState,this.options),{inputType:"insertText",data:null})}dispatchInputEvent(e={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleDelete({event:e,selection:s,isForward:t,force:n=!1}){let r={value:this.elementState.value,selection:s},[o,u]=r.selection,{elementState:c}=this.preprocessor({elementState:r,data:""},t?"deleteForward":"deleteBackward"),a=new Q(c,this.options),[l,d]=c.selection;a.deleteCharacters([l,d]);let p=this.postprocessor(a,r),f={value:r.value.slice(0,o)+r.value.slice(u),selection:[o,o]};if(!(Lt(f,p)&&!n&&!this.element.isContentEditable)){if(Tn(r,c,a,p))return e.preventDefault(),this.updateSelectionRange(t?[d,d]:[l,l]);this.upcomingElementState=p}}handleInsert(e,s){let{options:t,maxLength:n,element:r,elementState:o}=this,{elementState:u,data:c=s}=this.preprocessor({data:s,elementState:o},"insert"),a=new Q(u,t);try{a.addCharacters(u.selection,c)}catch{return e.preventDefault()}let[l,d]=o.selection,p={value:o.value.slice(0,l)+s+o.value.slice(d),selection:[l+s.length,l+s.length]},f=this.clampState(this.postprocessor(a,o));(!Lt(this.clampState(p),f)||r.isContentEditable)&&(this.upcomingElementState=f,t.overwriteMode==="replace"&&p.value.length>n&&this.dispatchInputEvent({inputType:"insertText",data:s}))}handleEnter(e){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(e,`
`)}clampState({value:e,selection:s}){let[t,n]=s,r=this.maxLength;return{value:e.slice(0,r),selection:[Math.min(t,r),Math.min(n,r)]}}};var _t=(()=>{let e=class e{constructor(){this.elementRef=h(Kt).nativeElement,this.ngZone=h(it),this.maskedElement=null,this.options=null,this.elementPredicate=tn;let t=h(at,{self:!0,optional:!0});if(t){let n=t.writeValue.bind(t);t.writeValue=r=>{n(this.options?$(String(r??""),this.options):r)}}}ngOnChanges(){return Gt(this,null,function*(){let{elementPredicate:t,options:n,maskedElement:r,elementRef:o,ngZone:u}=this;if(r?.destroy(),!n)return;let c=yield t(o);this.elementPredicate!==t||this.options!==n||u.runOutsideAngular(()=>{this.maskedElement=new xt(c,n)})})}ngOnDestroy(){this.maskedElement?.destroy()}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=j({type:e,selectors:[["","maskito",""]],inputs:{options:[0,"maskito","options"],elementPredicate:[0,"maskitoElement","elementPredicate"]},features:[Yt]});let i=e;return i})();function sn(i){return be(_t,"options",i)}function U(i,e,s){let t=Math.min(Number(s),Math.max(Number(e),Number(i)));return i instanceof Date?new Date(t):t}var Fn=[".",",","\u0431","\u044E"];var Vt="\xA0",Vn="\u200B",an="\u2013",ln="\u2014",Tt="-",Ft="\u2212",dn="\u30FC";var rs=new RegExp(`[${Vt}APM]+$`,"g"),os=new RegExp(`${Vt}[AP]M$`,"g"),$n=[":","."];function G(i){return i}function Bn(){}var pn=/[\\^$.*+?()[\]{}|]/g,Hn=new RegExp(pn.source);function S(i){return i&&Hn.test(i)?i.replaceAll(pn,String.raw`\$&`):i}function C(i,{prefix:e,postfix:s}){var t,n;let r=new RegExp(`^${S(e)}`),o=new RegExp(`${S(s)}$`),[u=""]=(t=i.match(r))!==null&&t!==void 0?t:[],[c=""]=(n=i.match(o))!==null&&n!==void 0?n:[];return{extractedPrefix:u,extractedPostfix:c,cleanValue:u||c?i.slice(u.length,c.length?-c.length:1/0):i}}function jn(i,e){let s="";for(let t=0;t<i.length;t++){if(i[t]!==e[t])return s;s+=i[t]}return s}function rn(i){return i.replaceAll(/[０-９]/g,e=>String.fromCharCode(e.charCodeAt(0)-65248))}function Un(){return({elementState:i,data:e})=>{let{value:s,selection:t}=i;return{elementState:{selection:t,value:rn(s)},data:rn(e)}}}var us=new RegExp(`[${$n.map(S).join("")}]$`);function Gn(i){let e=new RegExp(`${S(i)}$`);return i?({value:s,selection:t},n)=>{if(!s&&!n.value.endsWith(i))return{value:s,selection:t};if(!s.endsWith(i)&&!n.value.endsWith(i))return{selection:t,value:s+i};let r=n.value.replace(e,""),o=n.selection[1]>r.length,u=jn(r,s);return{selection:t,value:Array.from(i).reverse().reduce((c,a,l)=>{let d=c.length-1-l,p=u[d]===a&&o;return c[d]!==a||p?c.slice(0,d+1)+a+c.slice(d+1):c},s)}}:G}function Wn(i){return i?({value:e,selection:s},t)=>{if(e.startsWith(i)||!e&&!t.value.startsWith(i))return{value:e,selection:s};let[n,r]=s,o=Array.from(i).reduce((c,a,l)=>c[l]===a?c:c.slice(0,l)+a+c.slice(l),e),u=o.length-e.length;return{selection:[n+u,r+u],value:o}}:G}function $t(i,e,s){return(t,n)=>{let r=()=>e(t,n);return t.addEventListener(i,r,s),()=>t.removeEventListener(i,r,s)}}function zn(i){return(e,s)=>{let t=e.ownerDocument,n=0,r=()=>n++,o=()=>{n=Math.max(--n,0)},u=()=>{if(e.matches(":focus")){if(n)return t.addEventListener("mouseup",u,{once:!0,passive:!0});i(e,s)}};return t.addEventListener("selectionchange",u,{passive:!0}),e.addEventListener("focus",u,{passive:!0}),e.addEventListener("mousedown",r,{passive:!0}),t.addEventListener("mouseup",o,{passive:!0}),()=>{t.removeEventListener("selectionchange",u),e.removeEventListener("focus",u),e.removeEventListener("mousedown",r),t.removeEventListener("mouseup",o)}}}function mn(i){return zn(e=>{var s,t;let n=(s=e.selectionStart)!==null&&s!==void 0?s:0,r=(t=e.selectionEnd)!==null&&t!==void 0?t:0,[o,u]=i(e.value,[n,r]);(o>n||u<r)&&e.setSelectionRange(U(n,o,u),U(r,o,u))})}var cs=Intl.DateTimeFormat("en-US",{month:"2-digit",day:"2-digit",year:"numeric"});function Zn({prefix:i,postfix:e}){return({elementState:s,data:t})=>{let{cleanValue:n}=C(t,{prefix:i,postfix:e});return{elementState:s,data:n}}}function fn({decimalPseudoSeparators:i,decimalSeparator:e,maximumFractionDigits:s,min:t,minusSign:n,postfix:r,prefix:o,pseudoMinuses:u,thousandSeparator:c}){let a=t<0&&[n,...u].includes(o)?"":on(o),l=String.raw`\d`,d=t<0?`[${n}${u.map(E=>`\\${E}`).join("")}]?`:"",p=c?`[${l}${S(c).replaceAll(/\s/g,String.raw`\s`)}]*`:`[${l}]*`,f=Number.isFinite(s)?s:"",m=s>0?`([${S(e)}${i.map(S).join("")}]${l}{0,${f}})?`:"",_=on(r);return new RegExp(`^${a}${d}${p}${m}${_}$`)}function on(i){return i?`${i.split("").map(e=>`${S(e)}?`).join("")}`:""}function nt(i,e="."){let s=!!new RegExp(`^\\D*[${Ft}\\${Tt}${an}${ln}${dn}]`).exec(i),t=S(e),n=i.replaceAll(new RegExp(`${t}(?!\\d)`,"g"),"").replaceAll(new RegExp(`[^\\d${t}]`,"g"),"").replace(e,e&&".");return n?+`${s?Tt:""}${n}`:NaN}function Yn(i){var e;let s=String(i),[t="",n]=s.split("e-"),r=s;if(n){let[,o]=t.split("."),u=Number(n)+((e=o?.length)!==null&&e!==void 0?e:0);r=i.toFixed(u)}return r}function hn(i,{decimalSeparator:e,minusSign:s}){let[t="",n=""]=e?i.split(e):[i],r=S(s),[,o="",u=""]=new RegExp(`^(?:[^\\d${r}])?(${r})?(.*)`).exec(t)||[];return{minus:o,integerPart:u,decimalPart:n}}function Xn({decimalSeparator:i,thousandSeparator:e,decimalPseudoSeparators:s=Fn}){return s.filter(t=>t!==e&&t!==i)}function Kn({decimalSeparator:i,minimumFractionDigits:e,prefix:s,postfix:t}){return e?({value:n,selection:r})=>{let{cleanValue:o,extractedPrefix:u,extractedPostfix:c}=C(n,{prefix:s,postfix:t});if(Number.isNaN(nt(o,i)))return{value:n,selection:r};let[a,l=""]=o.split(i);return{value:u+a+i+l.padEnd(e,"0")+c,selection:r}}:G}function qn({prefix:i,postfix:e,decimalSeparator:s,minusSign:t}){return({value:n,selection:r})=>{let[o]=r,{cleanValue:u,extractedPrefix:c,extractedPostfix:a}=C(n,{prefix:i,postfix:e}),{minus:l,integerPart:d,decimalPart:p}=hn(u,{decimalSeparator:s,minusSign:t}),f=!d&&!p&&!!s&&u.includes(s);return!d&&!Number(p)&&o===(l+c).length||f?{selection:r,value:c+l+a}:{value:n,selection:r}}}function Jn({decimalPseudoSeparators:i,decimalSeparator:e,minusSign:s,postfix:t,prefix:n,pseudoMinuses:r}){let o=!0,u=fn({decimalSeparator:e,decimalPseudoSeparators:i,pseudoMinuses:r,prefix:"",postfix:"",thousandSeparator:"",maximumFractionDigits:1/0,min:Number.MIN_SAFE_INTEGER,minusSign:s});return({elementState:c,data:a})=>{if(!o)return{elementState:c,data:a};o=!1;let{value:l,selection:d}=c,[p,f]=d,{extractedPrefix:m,cleanValue:_,extractedPostfix:E}=C(l,{prefix:n,postfix:t}),w=$({selection:[Math.max(p-m.length,0),U(f-m.length,0,_.length)],value:_},{mask:u}),[B,M]=w.selection;return{elementState:{selection:[B+m.length,M+m.length],value:m+w.value+E},data:a}}}function Qn({decimalSeparator:i,thousandSeparator:e,prefix:s,postfix:t}){let n=o=>{let u=S(e);return o.replace(new RegExp(`^(\\D+)?[0${u}]+(?=0)`),"$1").replace(new RegExp(`^(\\D+)?[0${u}]+(?=[1-9])`),"$1")},r=(o,u)=>{let c=o.slice(0,u),a=o.slice(u).startsWith("0");return c.length-n(c).length+(a?1:0)};return({value:o,selection:u})=>{let[c,a]=u,{cleanValue:l,extractedPrefix:d,extractedPostfix:p}=C(o,{prefix:s,postfix:t}),f=!!i&&l.includes(i),[m="",_=""]=i?l.split(i):[l],E=n(m);if(m===E)return{value:o,selection:u};let w=c-r(o,c),B=a-r(o,a);return{value:d+E+(f?i:"")+_+p,selection:[Math.max(w,0),Math.max(B,0)]}}}function ti({min:i,max:e,decimalSeparator:s,minusSign:t}){return({value:n,selection:r})=>{let o=nt(n,s),u=o>0?Math.min(o,e):Math.max(o,i);if(o&&u!==o){let c=`${u}`.replace(".",s).replace(Tt,t);return{value:c,selection:[c.length,c.length]}}return{value:n,selection:r}}}function ei({decimalSeparator:i,thousandSeparator:e,minimumFractionDigits:s}){return({elementState:t,data:n},r)=>{let{value:o,selection:u}=t,[c,a]=u,l=o.slice(c,a),d=s?[i,e]:[e],p=!!s&&c>o.indexOf(i)&&!!l.match(/^0+$/gi);return r!=="deleteBackward"&&r!=="deleteForward"||!d.includes(l)&&!p?{elementState:t,data:n}:{elementState:{value:o,selection:r==="deleteForward"?[a,a]:[c,c]},data:n}}}function ni({decimalSeparator:i,maximumFractionDigits:e,prefix:s,postfix:t}){let n=new RegExp(`^\\D*${S(i)}`);return({elementState:r,data:o})=>{let{value:u,selection:c}=r,{cleanValue:a,extractedPrefix:l}=C(u,{prefix:s,postfix:t}),[d,p]=c,f=U(d-l.length,0,a.length),m=U(p-l.length,0,a.length);if(e<=0||a.slice(0,f).includes(i)||a.slice(m).includes(i)||!o.match(n))return{elementState:r,data:o};let _=/\d+/.exec(a.slice(0,f));return{elementState:r,data:_?o:`0${o}`}}}function un({validCharacter:i,pseudoCharacters:e,prefix:s,postfix:t}){let n=new RegExp(`[${e.join("")}]`,"gi");return({elementState:r,data:o})=>{let{value:u,selection:c}=r,{cleanValue:a,extractedPostfix:l,extractedPrefix:d}=C(u,{prefix:s,postfix:t});return{elementState:{selection:c,value:d+a.replace(n,i)+l},data:o.replace(n,i)}}}function ii({decimalSeparator:i,prefix:e,postfix:s}){return i?({elementState:t,data:n})=>{let{value:r,selection:o}=t,[u,c]=o,{cleanValue:a}=C(r,{prefix:e,postfix:s});return{elementState:t,data:!a.includes(i)||r.slice(u,c+1).includes(i)?n:n.replaceAll(new RegExp(S(i),"gi"),"")}}:G}function si({thousandSeparator:i,decimalSeparator:e,prefix:s,postfix:t,minusSign:n}){if(!i)return G;let r=(...o)=>o.every(u=>/\s/.test(u));return({value:o,selection:u})=>{let[c,a]=u,[l,d]=u,{cleanValue:p,extractedPostfix:f,extractedPrefix:m}=C(o,{prefix:s,postfix:t}),{minus:_,integerPart:E,decimalPart:w}=hn(p,{decimalSeparator:e,minusSign:n}),B=e&&p.includes(e),M=p.length-(_+E+(B?e+w:"")).length;M>0&&c&&c<=M&&(l-=M),M>0&&a&&a<=M&&(d-=M);let bn=Array.from(E).reduceRight((H,W,L)=>{let Dt=!(!L&&W===i)&&!!H.length&&(H.length+1)%4===0,Ut=W===i||r(W,i);return Dt&&Ut?i+H:!Dt&&Ut?(L&&L<=c&&l--,L&&L<=a&&d--,H):Dt?(L<c&&l++,L<a&&d++,W+i+H):W+H},"");return{value:m+_+bn+(B?e:"")+w+f,selection:[l,d]}}}function ri({maximumFractionDigits:i,decimalSeparator:e,prefix:s,postfix:t}){if(i>0||!e)return G;let n=new RegExp(`${S(e)}.*$`,"g");return({elementState:r,data:o})=>{let{value:u,selection:c}=r,{cleanValue:a,extractedPrefix:l,extractedPostfix:d}=C(u,{prefix:s,postfix:t}),[p,f]=c,m=l+a.replace(n,"")+d;return{elementState:{selection:[Math.min(p,m.length),Math.min(f,m.length)],value:m},data:o.replace(n,"")}}}var cn=[0,0];function oi({decimalSeparator:i,thousandSeparator:e,prefix:s,postfix:t}){let n=Qn({decimalSeparator:i,thousandSeparator:e,prefix:s,postfix:t});return $t("blur",r=>{let o=n({value:r.value,selection:cn},{value:"",selection:cn}).value;et(r,o)},{capture:!0})}function ui({min:i,max:e,decimalSeparator:s}){return $t("blur",(t,n)=>{let r=nt(t.value,s),o=U(r,i,e);!Number.isNaN(r)&&r!==o&&et(t,$(Yn(o),n))},{capture:!0})}function ci({decimalSeparator:i,prefix:e,postfix:s}){return i?$t("blur",t=>{let{cleanValue:n,extractedPostfix:r,extractedPrefix:o}=C(t.value,{prefix:e,postfix:s}),u=o+n.replace(new RegExp(`^(\\D+)?${S(i)}`),`$10${i}`)+r;et(t,u)},{capture:!0}):Bn}function Bt({max:i=Number.MAX_SAFE_INTEGER,min:e=Number.MIN_SAFE_INTEGER,precision:s=0,thousandSeparator:t=Vt,decimalSeparator:n=".",decimalPseudoSeparators:r,decimalZeroPadding:o=!1,prefix:u="",postfix:c="",minusSign:a=Ft,maximumFractionDigits:l=s,minimumFractionDigits:d=o?l:0}={}){let p=[Tt,an,ln,dn,Ft].filter(E=>E!==t&&E!==n&&E!==a),f=Xn({decimalSeparator:n,thousandSeparator:t,decimalPseudoSeparators:r}),m=u.endsWith(n)&&l>0?`${u}${Vn}`:u,_=Jn({decimalSeparator:n,decimalPseudoSeparators:f,pseudoMinuses:p,prefix:m,postfix:c,minusSign:a});return n=l<=0&&n===t?"":n,Object.assign(Object.assign({},tt),{mask:fn({decimalSeparator:n,maximumFractionDigits:l,min:e,minusSign:a,postfix:c,prefix:m,pseudoMinuses:p,thousandSeparator:t,decimalPseudoSeparators:f}),preprocessors:[Un(),_,Zn({prefix:m,postfix:c}),un({validCharacter:a,pseudoCharacters:p,prefix:m,postfix:c}),un({validCharacter:n,pseudoCharacters:f,prefix:m,postfix:c}),ni({decimalSeparator:n,maximumFractionDigits:l,prefix:m,postfix:c}),ei({decimalSeparator:n,minimumFractionDigits:d,thousandSeparator:t}),ri({maximumFractionDigits:l,decimalSeparator:n,prefix:m,postfix:c}),ii({decimalSeparator:n,prefix:m,postfix:c})],postprocessors:[ti({decimalSeparator:n,min:e,max:i,minusSign:a}),Wn(m),Gn(c),si({decimalSeparator:n,thousandSeparator:t,prefix:m,postfix:c,minusSign:a}),Kn({decimalSeparator:n,prefix:m,postfix:c,minimumFractionDigits:Math.min(d,l)}),qn({prefix:m,postfix:c,decimalSeparator:n,minusSign:a})],plugins:[oi({decimalSeparator:n,thousandSeparator:t,prefix:m,postfix:c}),ci({decimalSeparator:n,prefix:m,postfix:c}),ui({min:e,max:i,decimalSeparator:n})],overwriteMode:d>0?({value:E,selection:[w]})=>w<=E.indexOf(n)?"shift":"replace":"shift"})}var ai=["tuiInputNumber","","step",""];function li(i,e){if(i&1){let s=rt();v(0,"section",2)(1,"button",3),I("click.prevent",function(){F(s);let n=y(2);return V(n.onStep(n.step()))})("mousedown.prevent",function(){F(s);let n=y(2);return V(n.el.focus())}),b(2," + "),g(),v(3,"button",3),I("click.prevent",function(){F(s);let n=y(2);return V(n.onStep(-n.step()))})("mousedown.prevent",function(){F(s);let n=y(2);return V(n.el.focus())}),b(4," - "),g()()}if(i&2){let s=y(2);x(),P("appearance",s.appearance())("disabled",!s.input.interactive()||s.value()>=s.input.max())("iconStart",s.options.icons.increase),x(2),P("appearance",s.appearance())("disabled",!s.input.interactive()||s.value()<=s.input.min())("iconStart",s.options.icons.decrease)}}function di(i,e){if(i&1&&(Jt(0),Ct(1,li,5,6,"section",1),Qt()),i&2){let s=y();x(),P("ngIf",s.step())}}var pi={min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,prefix:"",postfix:"",step:0,icons:{increase:"@tui.plus",decrease:"@tui.minus"},valueTransformer:null},[Ht,Os]=pt(pi),mi=18,jt=(()=>{let e=class e extends Oe{constructor(){super(...arguments),this.textfield=h(He),this.isIOS=h(Me),this.numberFormat=lt(h(Pe),{initialValue:we}),this.formatted=O(()=>nt(this.textfield.value(),this.numberFormat().decimalSeparator)),this.precision=O(()=>Number.isNaN(this.numberFormat().precision)?2:this.numberFormat().precision),this.unfinished=O((t=this.formatted())=>t<0?t>this.max():t<this.min()),this.onChangeEffect=re(()=>{let t=this.formatted();if(Number.isNaN(t)){this.onChange(null);return}this.unfinished()||t<this.min()||t>this.max()||this.value()===t||this.onChange(t)},he),this.options=h(Ht),this.element=Nt(),this.inputMode=O(()=>this.isIOS&&this.min()<0?"text":this.precision()?"decimal":"numeric"),this.defaultMaxLength=O(()=>{let{decimalSeparator:t,thousandSeparator:n}=this.numberFormat(),o=!!this.precision()&&this.textfield.value().includes(t)?Math.min(this.precision()+1,20):0,u=n.repeat(5).length;return mi+o+u}),this.mask=sn(O((o=this.numberFormat(),r=this.precision())=>{var u=o,{decimalMode:t}=u,n=At(u,["decimalMode"]);return this.computeMask(Z(z({},n),{maximumFractionDigits:r,min:this.min(),max:this.max(),prefix:this.prefix(),postfix:this.postfix(),minimumFractionDigits:t==="always"?r:0}))})),this.min=D(this.options.min),this.max=D(this.options.max),this.prefix=D(this.options.prefix),this.postfix=D(this.options.postfix)}set minSetter(t){this.updateMinMaxLimits(t,this.max())}set maxSetter(t){this.updateMinMaxLimits(this.min(),t)}set prefixSetter(t){this.prefix.set(t)}set postfixSetter(t){this.postfix.set(t)}writeValue(t){super.writeValue(t),this.setValue(this.value())}setValue(t){this.textfield.value.set(this.formatNumber(t))}onBlur(){this.onTouched(),this.unfinished()||this.setValue(this.value())}onFocus(){Number.isNaN(this.formatted())&&!this.readOnly()&&this.textfield.value.set(this.prefix()+this.postfix())}formatNumber(t){return t===null||Number.isNaN(t)?"":(this.prefix()!==It?this.prefix():"")+Re(t,Z(z({},this.numberFormat()),{precision:fe(t,this.precision())?this.precision():1/0})).replace(ge,It)+this.postfix()}updateMinMaxLimits(t,n){let r=this.transformer.fromControlValue(t)??this.options.min,o=this.transformer.fromControlValue(n)??this.options.max;this.min.set(Math.min(r,o)),this.max.set(Math.max(r,o))}computeMask(t){let{prefix:n="",postfix:r=""}=t,a=Bt(t),{plugins:o}=a,u=At(a,["plugins"]),c=nn(Bt(Z(z({},t),{min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER})));return Z(z({},u),{plugins:[...o,c,mn(l=>[n.length,l.length-r.length])]})}};e.\u0275fac=(()=>{let t;return function(r){return(t||(t=Xt(e)))(r||e)}})(),e.\u0275dir=j({type:e,selectors:[["input","tuiInputNumber",""]],hostVars:3,hostBindings:function(n,r){n&1&&I("blur",function(){return r.onBlur()})("focus",function(){return r.onFocus()}),n&2&&(te("disabled",r.disabled()),st("inputMode",r.inputMode())("maxLength",r.element.maxLength>0?r.element.maxLength:r.defaultMaxLength()))},inputs:{minSetter:[0,"min","minSetter"],maxSetter:[0,"max","maxSetter"],prefixSetter:[0,"prefix","prefixSetter"],postfixSetter:[0,"postfix","postfixSetter"]},features:[ut([Le(e),ke(Ht)]),Y([je,_t]),qt]});let i=e;return i})(),gn=(()=>{let e=class e{constructor(){this.destroyRef=h(Zt),this.zone=h(it),this.el=Nt(),this.appearance=h(Be).appearance,this.options=h(Ht),this.input=h(jt,{self:!0}),this.step=D(this.options.step),this.value=O(()=>this.input.value()??NaN)}set stepSetter(t){this.step.set(t)}onStep(t){let n=Number.isNaN(this.value())?0:this.value(),r=me(n+t,this.input.min(),this.input.max());Number.isNaN(this.value())&&zt(0).pipe(Ae(this.zone),ve(this.destroyRef)).subscribe(()=>{let o=this.el.value.length-this.input.postfix().length;this.el.setSelectionRange(o,o)}),this.input.setValue(r)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=R({type:e,selectors:[["input","tuiInputNumber","","step",""]],hostAttrs:["ngSkipHydration","true"],hostVars:2,hostBindings:function(n,r){n&1&&I("keydown.arrowDown.prevent",function(){return r.onStep(-r.step())})("keydown.arrowUp.prevent",function(){return r.onStep(r.step())}),n&2&&ne("_with-buttons",r.step())},inputs:{stepSetter:[0,"step","stepSetter"]},attrs:ai,decls:1,vars:0,consts:[[4,"tuiTextfieldContent"],["class","t-input-number-buttons",4,"ngIf"],[1,"t-input-number-buttons"],["size","s","tabindex","-1","tuiIconButton","","type","button",1,"t-button",3,"click.prevent","mousedown.prevent","appearance","disabled","iconStart"]],template:function(n,r){n&1&&Ct(0,di,2,1,"ng-container",0)},dependencies:[oe,mt,Ue],styles:[`.t-input-number-buttons.t-input-number-buttons{position:absolute;right:0;display:flex;block-size:var(--t-height);flex-direction:column;gap:.125rem;border-radius:inherit}tui-textfield[data-size=s] .t-input-number-buttons.t-input-number-buttons{flex-direction:row-reverse}.t-input-number-buttons.t-input-number-buttons>*{flex:1 1 0;border-radius:0}.t-input-number-buttons.t-input-number-buttons>*:first-child{border-top-right-radius:inherit}.t-input-number-buttons.t-input-number-buttons>*:last-child{border-bottom-right-radius:inherit}tui-textfield[data-size=l] .t-input-number-buttons.t-input-number-buttons>*{inline-size:var(--tui-height-m)}tui-textfield[data-size=s] .t-input-number-buttons.t-input-number-buttons>*:first-child{border-top-right-radius:inherit;border-bottom-right-radius:inherit}tui-textfield[data-size=s] .t-input-number-buttons.t-input-number-buttons>*:last-child{border-radius:0}[tuiInputNumber]._with-buttons{border-top-right-radius:0;border-bottom-right-radius:0}tui-textfield[data-size=l]{--t-input-number-offset-end: calc(var(--tui-height-m) + .125rem)}tui-textfield[data-size=m]{--t-input-number-offset-end: calc(var(--tui-height-s) + .125rem)}tui-textfield[data-size=s]{--t-input-number-offset-end: calc(2 * var(--tui-height-s) + .25rem)}[tuiInputNumber]._with-buttons,[tuiInputNumber]._with-buttons~.t-template{inline-size:calc(100% - var(--t-input-number-offset-end))}[tuiInputNumber]._with-buttons~.t-content{margin-inline-end:var(--t-input-number-offset-end)}
`],encapsulation:2,changeDetection:0});let i=e;return i})();function fi(i,e){if(i&1&&(v(0,"div",2),b(1),T(2,"tuiAmount"),T(3,"async"),g()),i&2){y(2);let s=Pt(0);x(),ot("\u041A\u043E\u043C\u0438\u0441\u0441\u0438\u044F: ",N(3,5,ct(2,1,s.commission,"RUB","right")))}}function hi(i,e){if(i&1&&(X(0),T(1,"tuiAmount"),T(2,"async"),X(3),T(4,"tuiAmount"),T(5,"async"),X(6),T(7,"tuiAmount"),T(8,"async"),v(9,"div",11)(10,"h2",0),b(11," \u0420\u0435\u0437\u0443\u043B\u044C\u0442\u0430\u0442 "),v(12,"div",2),b(13),g(),v(14,"div",2),b(15),g(),yt(16,fi,4,7,"div",2),g()()),i&2){y();let s=Pt(0),t=N(2,6,N(1,4,s.sharesToBuy)),n=N(5,12,ct(4,8,s.newTotalCost,"RUB","right")),r=N(8,18,ct(7,14,s.newAveragePrice,"RUB","right"));x(13),ie("\u041D\u0443\u0436\u043D\u043E \u0434\u043E\u043A\u0443\u043F\u0438\u0442\u044C ",t," \u0430\u043A\u0446\u0438\u0439, \u043D\u0430 \u0441\u0443\u043C\u043C\u0443: ",n),x(2),ot("\u041D\u043E\u0432\u0430\u044F \u0441\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430: ",r),x(),wt(s.commission?16:-1)}}var vn=class i{usersService=h(ce);commission=this.usersService.currentCommission;title="\u0420\u0430\u0441\u0441\u0447\u0435\u0442 \u0441\u0440\u0435\u0434\u043D\u0435\u0439 \u0446\u0435\u043D\u044B \u0430\u043A\u0446\u0438\u0439";form=new le({currentShares:new K(null),averagePrice:new K(null),targetPrice:new K(null),currentMarketPrice:new K(null)});result=D(null);calculateAdditionalShares(e){let{currentShares:s,averagePrice:t,targetPrice:n,currentMarketPrice:r,commission:o}=e,u=s*(t-n),c=n-r;if(c<=0)throw new Error(`\u041D\u0435\u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E \u0434\u043E\u0441\u0442\u0438\u0447\u044C \u0446\u0435\u043B\u0435\u0432\u043E\u0439 \u0446\u0435\u043D\u044B ${n} \u0440\u0443\u0431., \u0442\u0430\u043A \u043A\u0430\u043A \u0440\u044B\u043D\u043E\u0447\u043D\u0430\u044F \u0446\u0435\u043D\u0430 (${r} \u0440\u0443\u0431.) \u043D\u0435 \u043D\u0438\u0436\u0435 \u0446\u0435\u043B\u0435\u0432\u043E\u0439.`);let a=Math.ceil(u/c),l=s*t+a*r,d=s+a,p=l/d,f=a*p,m=o?f/100*o.share:void 0;return{sharesToBuy:a,newAveragePrice:p,newTotalCost:a*p,commission:m}}showResult(){let e=this.form.controls.currentShares.value,s=this.form.controls.averagePrice.value,t=this.form.controls.targetPrice.value,n=this.form.controls.currentMarketPrice.value,r=this.commission();if(!(e&&s&&t&&n))return;let o=this.calculateAdditionalShares({currentShares:e,averagePrice:s,targetPrice:t,currentMarketPrice:n,commission:r});this.result.set(o)}static \u0275fac=function(s){return new(s||i)};static \u0275cmp=R({type:i,selectors:[["app-calculator"]],decls:38,vars:18,consts:[["tuiTitle","m"],["tuiAppearance","info","tuiCardMedium","",1,"card"],["tuiSubtitle",""],[1,"card__footer"],["tuiLabel",""],["tuiInputNumber","",3,"min","step","formControl"],["tuiInputNumber","",3,"postfix","formControl"],["tuiTooltip","\u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 \u0430\u043A\u0446\u0438\u0439 \u0432 \u0442\u0435\u043A\u0443\u0449\u0435\u043C \u043F\u043E\u0440\u0442\u0444\u0435\u043B\u0435"],["tuiTooltip","\u0426\u0435\u043D\u0430 \u0430\u043A\u0446\u0438\u0439, \u043F\u043B\u0430\u043D\u0438\u0440\u0443\u0435\u043C\u044B\u0445 \u043A \u043F\u043E\u043A\u0443\u043F\u043A\u0435"],["tuiHintDirection","right","tuiTooltip","\u0426\u0435\u043B\u0435\u0432\u0430\u044F \u0441\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430 \u0430\u043A\u0446\u0438\u0439 \u0432 \u043F\u043E\u0440\u0442\u0444\u0435\u043B\u0435"],["size","m","tuiButton","","type","button",1,"button-calc",3,"click"],[1,"result"]],template:function(s,t){if(s&1){let n=rt();X(0),v(1,"h2",0),b(2),g(),v(3,"div",1)(4,"h2",0)(5,"div",2),b(6,"\u0410\u043A\u0446\u0438\u0438 \u0432 \u043D\u0430\u043B\u0438\u0447\u0438\u0438"),g()(),v(7,"footer",3)(8,"tui-textfield")(9,"label",4),b(10,"\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E \u0430\u043A\u0446\u0438\u0439"),g(),k(11,"input",5),g(),v(12,"tui-textfield")(13,"label",4),b(14,"\u0421\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430"),g(),k(15,"input",6),T(16,"tuiCurrency"),k(17,"tui-icon",7),g()()(),v(18,"div",1)(19,"h2",0)(20,"div",2),b(21,"\u041A \u043F\u043E\u043A\u0443\u043F\u043A\u0435"),g()(),v(22,"footer",3)(23,"tui-textfield")(24,"label",4),b(25,"\u0426\u0435\u043D\u0430 \u043A \u043F\u043E\u043A\u0443\u043F\u043A\u0435"),g(),k(26,"input",6),T(27,"tuiCurrency"),k(28,"tui-icon",8),g(),v(29,"tui-textfield")(30,"label",4),b(31,"\u0416\u0435\u043B\u0430\u0435\u043C\u0430\u044F \u0441\u0440\u0435\u0434\u043D\u044F\u044F \u0446\u0435\u043D\u0430"),g(),k(32,"input",6),T(33,"tuiCurrency"),k(34,"tui-icon",9),g()()(),v(35,"button",10),I("click",function(){return F(n),V(t.showResult())}),b(36,` \u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044C
`),g(),yt(37,hi,17,20,"div",11)}if(s&2){let n=se(t.result()),r=t.form.controls;x(2),ot(" ",t.title,`
`),x(9),P("min",1)("step",1)("formControl",r.currentShares),x(4),P("postfix",N(16,12,"RUB"))("formControl",r.averagePrice),x(11),P("postfix",N(27,14,"RUB"))("formControl",r.currentMarketPrice),x(6),P("postfix",N(33,16,"RUB"))("formControl",r.targetPrice),x(5),wt(n?37:-1)}},dependencies:[ue,pe,at,ae,de,$e,ht,jt,gn,Xe,ze,Ze,Se,Ge,Ie,mt,We],styles:[".card[_ngcontent-%COMP%]{width:100%;height:auto;gap:10px;margin-top:15px}.card__footer[_ngcontent-%COMP%]{gap:10px;display:flex;flex-direction:column;width:100%}.button-calc[_ngcontent-%COMP%]{width:100%;margin-top:15px}.result[_ngcontent-%COMP%]{margin-top:25px}"]})};export{vn as CalculatorComponent};
