import{a as v}from"./chunk-S3CE4ME5.js";import{f as h}from"./chunk-NX7OXYE2.js";import{d as l}from"./chunk-7EVGRHVX.js";import{C as c,M as u,a as o,fa as m,ka as a,pc as I,ya as p}from"./chunk-4JEDTTQH.js";var f=class i{serviceUrl=`${v}.InstrumentsService/`;http=a(l);authService=a(h);instrument=p(null);instruments=p({});selectInstrument=I(()=>this.instrument());constructor(){}loadInstrumentBy(t,e="INSTRUMENT_ID_TYPE_UID",r=""){this.http.post(`${this.serviceUrl}ShareBy`,{idType:e,id:t,classCode:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.authService.getAccessToken()}`}}).pipe(u(1)).subscribe(n=>this.instrument.set(n.instrument))}loadInstrumentsBy(t){if(!t.length)return;let e=t.map(r=>this.loadShare(r));c(e).pipe(u(1)).subscribe(r=>{let n={};for(let{instrument:s}of r)n[s.uid]=s;this.instruments.update(s=>o(o({},s),n))})}selectInstrumentById(t){return this.instruments()[t]||null}loadShare(t,e="INSTRUMENT_ID_TYPE_UID",r=""){return this.http.post(`${this.serviceUrl}ShareBy`,{idType:e,id:t,classCode:r},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.authService.getAccessToken()}`}})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=m({token:i,factory:i.\u0275fac,providedIn:"root"})};export{f as a};
