import{a as Z}from"./chunk-6H62NEYR.js";import{a as Y}from"./chunk-W7NX4HPM.js";import{a as j}from"./chunk-TQ7Q5KMP.js";import"./chunk-S3CE4ME5.js";import{a as W,b as X,c as te,d as ie}from"./chunk-24LNRKFB.js";import{b as ee}from"./chunk-CRKU5KSD.js";import{d as H}from"./chunk-NX7OXYE2.js";import{a as S}from"./chunk-XOOE5SPG.js";import"./chunk-7EVGRHVX.js";import{C as J,Ha as V,ea as Q,v as z,x as K,y as G}from"./chunk-VUGEM32W.js";import{i as L,j as q}from"./chunk-KPPRGEDN.js";import{$b as _,Cb as U,Db as D,Eb as v,Fb as c,Gb as m,Hb as h,Wa as p,Wb as E,Xb as F,Zb as u,_b as b,a as O,b as N,cc as k,gc as w,hb as C,hc as r,ic as s,ka as f,kb as y,kc as M,pc as P,qc as $,tc as R,x as B}from"./chunk-4JEDTTQH.js";function ne(t,e){let o=parseInt(t,10),i=(Math.sign(o)||1)*Math.abs(e)/1e9;return o+i}var oe=(()=>{let e=class e{transform(n){return X(n)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=y({name:"tuiAutoColor",type:e,pure:!0});let t=e;return t})();var re=(()=>{let e=class e{transform(n){return n.toUpperCase().split(" ").map(([i])=>i).join("").slice(0,2)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=y({name:"tuiInitials",type:e,pure:!0});let t=e;return t})();var ce={currency:null,currencyAlign:"left",sign:"negative-only"},ae=J(ce);function me(t,e){return e==="never"||!t||e==="negative-only"&&t>0?"":e==="force-negative"||t<0&&e!=="force-positive"?K:G}var ue=2,pe=(()=>{let e=class e{constructor(){this.options=f(ae),this.format=f(V)}transform(n,i=this.options.currency,g=this.options.currencyAlign){return this.format.pipe(B(d=>{let a=te(i),l=W(Math.abs(n),N(O({},d),{precision:Number.isNaN(d.precision)?ue:d.precision})),x=l==="0"?"":me(n,this.options.sign),A=a&&(a?.length>1||g==="right")?z:"";return g==="right"?`${x}${l}${A}${a}`:`${x}${a}${A}${l}`}))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=y({name:"tuiAmount",type:e,pure:!0});let t=e;return t})();var le=t=>[t],I=class t{position=R.required();combinePrice=ne;quantityUnits=P(()=>Number(this.position().quantity.units));static \u0275fac=function(o){return new(o||t)};static \u0275cmp=C({type:t,selectors:[["app-position-item"]],inputs:{position:[1,"position"]},decls:28,vars:45,consts:[["tuiAppearance","floating","tuiCardMedium","",1,"card",3,"routerLink"],[1,"avatar",3,"src"],[1,"content"],["tuiTitle","",1,"card__name"],[1,"current-price"],[1,"price"],[1,"expected-yield"]],template:function(o,n){if(o&1&&(k(0),r(1,"uppercase"),r(2,"tuiCurrency"),c(3,"div",0),h(4,"tui-avatar",1),r(5,"tuiAutoColor"),r(6,"tuiInitials"),c(7,"div",2)(8,"h2",3),u(9),m(),c(10,"div")(11,"span"),u(12),r(13,"tuiAmount"),r(14,"async"),m(),c(15,"span",4),u(16),r(17,"tuiAmount"),r(18,"async"),m()()(),c(19,"div",5)(20,"div"),u(21),r(22,"tuiAmount"),r(23,"async"),m(),c(24,"div",6),u(25),r(26,"tuiAmount"),r(27,"async"),m()()()),o&2){let i=n.position(),g=n.combinePrice(i.currentPrice.units,i.currentPrice.nano),d=n.combinePrice(i.expectedYield.units,i.expectedYield.nano),a=s(2,15,s(1,13,i.currentPrice.currency)),l=n.quantityUnits(),x=l*g;p(3),v("routerLink",w(43,le,i.ticker)),p(),E("background",s(5,17,i.ticker)),v("src",s(6,19,i.ticker)),p(5),_(" ",i.ticker," "),p(3),_("",s(14,23,s(13,21,l))," \u0448\u0442."),p(4),b(s(18,29,M(17,25,g,a,"right"))),p(5),b(s(23,35,M(22,31,x,a,"right"))),p(3),F("expected-yield_negative",d<0)("expected-yield_positive",d>0),p(),_("",s(27,41,M(26,37,d,a,"right"))," ")}},dependencies:[H,ee,Q,S,Z,oe,re,ie,q,pe,L],styles:[".card[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;block-size:auto;gap:10px;cursor:pointer}.avatar[_ngcontent-%COMP%]{display:flex}.content[_ngcontent-%COMP%]{display:flex;flex-flow:column;flex-grow:1;gap:6px}.price[_ngcontent-%COMP%]{display:flex;flex-flow:column;align-items:flex-end;gap:6px}.current-price[_ngcontent-%COMP%]{margin-left:8px}.expected-yield[_ngcontent-%COMP%]{top:-2px;position:relative;color:#888}.expected-yield_negative[_ngcontent-%COMP%]{color:#dc143c}.expected-yield_positive[_ngcontent-%COMP%]{color:#228b22}"]})};var fe=(t,e)=>e.ticker;function ye(t,e){if(t&1&&h(0,"app-position-item",1),t&2){let o=e.$implicit;v("position",o)}}var se=class t{operationsService=f(j);instrumentsService=f(Y);portfolio=this.operationsService.selectPortfolio;positions=P(()=>this.portfolio()?.positions);positionShares=P(()=>this.positions()?.filter(e=>e.instrumentType==="share")||[]);constructor(){$(()=>{let e=this.positionShares().map(o=>o.instrumentUid);e.length>0&&this.instrumentsService.loadInstrumentsBy(e)})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=C({type:t,selectors:[["app-positions"]],decls:4,vars:0,consts:[["tuiTitle","m",1,"title"],[3,"position"]],template:function(o,n){o&1&&(c(0,"h2",0),u(1,"\u041E\u0442\u043A\u0440\u044B\u0442\u044B\u0435 \u043F\u043E\u0437\u0438\u0446\u0438\u0438"),m(),U(2,ye,1,1,"app-position-item",1,fe)),o&2&&(p(2),D(n.positionShares()))},dependencies:[I,S],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;gap:10px}.title[_ngcontent-%COMP%]{margin-bottom:10px}"]})};export{se as PositionsComponent};
