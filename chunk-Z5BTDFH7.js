import{a as d,b as v}from"./chunk-Q76SPLNM.js";import{a as f}from"./chunk-S3CE4ME5.js";import{b as m}from"./chunk-JOQRKRUQ.js";import{d as l}from"./chunk-43IZR5HA.js";import"./chunk-7JHFUFAC.js";import{Hb as u,fa as c,hb as a,ka as i,pc as s,qc as r,ya as p}from"./chunk-LK5URRF6.js";var n=class o{serviceUrl=`${f}.UsersService/`;http=i(l);accounts=p([]);currentAccount=s(()=>this.accounts().length?this.accounts()[0]:null);constructor(){}loadAccounts(){this.http.post(`${this.serviceUrl}GetAccounts`,{status:"ACCOUNT_STATUS_UNSPECIFIED"}).subscribe(t=>this.accounts.set(t.accounts))}static \u0275fac=function(e){return new(e||o)};static \u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})};var h=class o{usersService=i(n);operationsService=i(d);instrumentsService=i(v);account=this.usersService.currentAccount;portfolio=this.operationsService.selectPortfolio;positions=s(()=>this.portfolio()?.positions);positionShares=s(()=>this.positions()?.filter(t=>t.instrumentType==="share")||[]);constructor(){r(()=>{let t=this.account();t?this.operationsService.loadPortfolio(t.id):this.loadAccounts()}),r(()=>{let t=this.positionShares().map(e=>e.instrumentUid);t.length&&this.instrumentsService.loadSharesBy(t)})}loadAccounts(){this.usersService.loadAccounts()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=a({type:o,selectors:[["app-positions-page"]],decls:1,vars:0,template:function(e,A){e&1&&u(0,"router-outlet")},dependencies:[m],encapsulation:2})};export{h as PositionsPageComponent};
