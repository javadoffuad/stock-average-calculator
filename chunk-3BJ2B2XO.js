import{a as h}from"./chunk-S3CE4ME5.js";import{d as a}from"./chunk-KPIESNAD.js";import{C as p,M as u,a as o,fa as I,ka as c,pc as l,ya as m}from"./chunk-4JEDTTQH.js";var f=class i{serviceUrl=`${h}.InstrumentsService/`;http=c(a);instrument=m(null);instruments=m({});selectInstrument=l(()=>this.instrument());constructor(){}loadInstrumentBy(t,e="INSTRUMENT_ID_TYPE_UID",n=""){this.http.post(`${this.serviceUrl}ShareBy`,{idType:e,id:t,classCode:n}).pipe(u(1)).subscribe(r=>this.instrument.set(r.instrument))}loadInstrumentsBy(t){if(!t.length)return;let e=t.map(n=>this.loadShare(n));p(e).pipe(u(1)).subscribe(n=>{let r={};for(let{instrument:s}of n)r[s.uid]=s;this.instruments.update(s=>o(o({},s),r))})}selectInstrumentById(t){return this.instruments()[t]||null}loadShare(t,e="INSTRUMENT_ID_TYPE_UID",n=""){return this.http.post(`${this.serviceUrl}ShareBy`,{idType:e,id:t,classCode:n})}static \u0275fac=function(e){return new(e||i)};static \u0275prov=I({token:i,factory:i.\u0275fac,providedIn:"root"})};export{f as a};
