import{a as m,b as l}from"./chunk-NO7XN4JG.js";import{a}from"./chunk-DQVELETE.js";import"./chunk-S3CE4ME5.js";import{b as p}from"./chunk-JOQRKRUQ.js";import"./chunk-43IZR5HA.js";import"./chunk-7JHFUFAC.js";import{Hb as c,hb as r,ka as o,pc as i,qc as s}from"./chunk-LK5URRF6.js";var u=class n{usersService=o(a);operationsService=o(m);instrumentsService=o(l);account=this.usersService.currentAccount;portfolio=this.operationsService.selectPortfolio;positions=i(()=>this.portfolio()?.positions);positionShares=i(()=>this.positions()?.filter(e=>e.instrumentType==="share")||[]);constructor(){s(()=>{let e=this.account();e?this.operationsService.loadPortfolio(e.id):(this.loadAccounts(),this.getInfo())}),s(()=>{let e=this.positionShares().map(t=>t.instrumentUid);e.length&&this.instrumentsService.loadSharesBy(e)})}loadAccounts(){this.usersService.loadAccounts()}getInfo(){this.usersService.getInfo()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=r({type:n,selectors:[["app-positions-page"]],decls:1,vars:0,template:function(t,f){t&1&&c(0,"router-outlet")},dependencies:[p],encapsulation:2})};export{u as PositionsPageComponent};
